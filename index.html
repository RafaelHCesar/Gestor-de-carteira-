<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Capital Trader | Gestor para Operações em Bolsa</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./src/styles/colors.css" />
    <link rel="stylesheet" href="./src/styles/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="icon" type="image/svg+xml" href="src/assets/icons/logo.svg" />
    <script src="./src/auth/authService.js"></script>
  </head>
  <body class="bg-gray-200" style="font-family: 'Inter', sans-serif">
    <!-- Sidebar -->
    <div class="sidebar bg-white shadow-lg">
      <!-- Logo e Título -->
      <div class="p-6 border-b border-gray-200">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-3">
            <img
              src="src/assets/icons/logo.svg"
              alt="Capital Trader"
              class="w-12 h-12"
            />
            <div>
              <h1 class="text-xl font-bold text-gray-800">Capital Trader</h1>
              <p class="text-sm text-gray-500">Gestão de Operações</p>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <div class="text-right">
              <p class="text-sm font-medium text-gray-800" id="user-name">Usuário</p>
              <p class="text-xs text-gray-500" id="user-email">usuario@email.com</p>
            </div>
            <button
              id="logout-button"
              class="p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200"
              title="Sair"
            >
              <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Menu de Navegação -->
      <nav class="p-6 space-y-3">
        <!-- Seção: Operações -->
        <div>
          <h3
            class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 px-3"
          >
            Operações
          </h3>

          <button
            type="button"
            class="sidebar-tab-button active"
            data-tab="portfolio"
          >
            <img
              src="src/assets/icons/portfolio.svg"
              class="w-5 h-5 mr-3"
              alt="Portfólio"
            />
            Portfólio
          </button>

          <button type="button" class="sidebar-tab-button" data-tab="swing">
            <img
              src="src/assets/icons/swing.svg"
              class="w-5 h-5 mr-3"
              alt="Swing Trade"
            />
            Swing Trade
          </button>

          <button type="button" class="sidebar-tab-button" data-tab="daytrade">
            <img
              src="src/assets/icons/daytrade.svg"
              class="w-5 h-5 mr-3"
              alt="Day Trade"
            />
            Day Trade
          </button>

          <button type="button" class="sidebar-tab-button" data-tab="capital">
            <img
              src="src/assets/icons/capital.svg"
              class="w-5 h-5 mr-3"
              alt="Gestão de Capital"
            />
            Gestão de Capital
          </button>
        </div>

        <!-- Divider -->
        <div class="border-t border-gray-200 my-4"></div>

        <!-- Seção: Análise e Configurações -->
        <div>
          <h3
            class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 px-3"
          >
            Análise & Config
          </h3>

          <button type="button" class="sidebar-tab-button" data-tab="taxes">
            <img
              src="src/assets/icons/taxes.svg"
              class="w-5 h-5 mr-3"
              alt="Impostos"
            />
            Impostos
          </button>

          <button type="button" class="sidebar-tab-button" data-tab="analysis">
            <img
              src="src/assets/icons/analysis.svg"
              class="w-5 h-5 mr-3"
              alt="Análise e Relatórios"
            />
            Análise e Relatórios
          </button>

          <button type="button" class="sidebar-tab-button" data-tab="config">
            <img
              src="src/assets/icons/config.svg"
              class="w-5 h-5 mr-3"
              alt="Configurações e Taxas"
            />
            Configurações e Taxas
          </button>
        </div>

        <!-- Divider -->
        <div class="border-t border-gray-200 my-4"></div>

        <!-- Seção: Perfil -->
        <div>
          <h3
            class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 px-3"
          >
            Conta
          </h3>

          <button type="button" class="sidebar-tab-button" data-tab="profile">
            <img
              src="src/assets/icons/profile.svg"
              class="w-5 h-5 mr-3"
              alt="Perfil"
            />
            Perfil
          </button>
        </div>
      </nav>
    </div>

    <!-- Overlay para mobile -->
    <div class="sidebar-overlay"></div>

    <!-- Conteúdo Principal -->
    <div class="main-content">
      <!-- Dashboard Section -->
      <div class="container">
        <div class="card">
          <!-- Linha 1: KPIs Principais -->
          <div class="grid grid-cols-1 md:grid-cols-5 gap-6 text-center">
            <div class="kpi-card">
              <p class="text-gray-500 text-sm">Saldo Atual</p>
              <p id="current-balance" class="text-3xl font-bold text-green-600">
                R$ 0,00
              </p>
            </div>
            <div class="md:col-span-3">
              <div class="kpi-group-card grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                  <p class="text-gray-500 text-sm">Investido em Ações</p>
                  <p id="invested" class="text-3xl font-bold text-gray-800">
                    R$ 0,00
                  </p>
                </div>
                <div>
                  <p class="text-gray-500 text-sm">
                    Resultado Líquido em Ações
                  </p>
                  <p
                    id="market-result"
                    class="text-3xl font-bold text-gray-800"
                  >
                    R$ 0,00
                  </p>
                </div>
                <div>
                  <p class="text-gray-500 text-sm">Percentual</p>
                  <p
                    id="market-percent"
                    class="text-3xl font-bold text-gray-800"
                  >
                    0,00%
                  </p>
                </div>
              </div>
            </div>
            <div class="kpi-card">
              <p class="text-gray-500 text-sm">Alertas</p>
              <p id="alerts" class="text-lg text-yellow-600">Nenhum alerta</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Conteúdo rolável -->
      <div class="container">
        <!-- Portfolio Tab Content -->
        <div id="portfolio" class="tab-content active">
          <div class="card">
            <h2 class="text-2xl font-semibold mb-6 text-gray-800">Carteira</h2>
            <div class="overflow-x-auto">
              <table
                class="min-w-full bg-white rounded-lg overflow-hidden table-responsive"
              >
                <thead class="bg-gray-50">
                  <tr>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Ativo
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Qtd.
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Preço Médio
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Preço Atual
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Val. Mercado
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      P&L Não Realizado
                    </th>
                  </tr>
                </thead>
                <tbody id="portfolio-list" class="divide-y divide-gray-200">
                  <tr>
                    <td colspan="6" class="py-4 px-4 text-center text-gray-500">
                      Nenhum ativo em carteira.
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Swing Trade Tab Content -->
        <div id="swing" class="tab-content">
          <div class="card">
            <h2 class="text-2xl font-semibold mb-6 text-gray-800">
              Swing Trade
            </h2>
            <form id="swing-form" class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div>
                <label
                  for="op-date"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Data da Operação:</label
                >
                <input
                  type="date"
                  id="op-date"
                  required
                  class="focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label
                  for="operation-type"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Tipo de Operação:</label
                >
                <select id="operation-type" required class="type-select">
                  <option value="">Selecione</option>
                  <option value="compra">Compra</option>
                  <option value="venda">Venda</option>
                </select>
              </div>
              <div>
                <label
                  for="asset-symbol"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Símbolo do Ativo (Ex: PETR4):</label
                >
                <input
                  type="text"
                  id="asset-symbol"
                  list="symbols-datalist"
                  placeholder="Ex: PETR4"
                  required
                  class="focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label
                  for="entry-value"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Valor da Entrada (por unidade):</label
                >
                <input
                  type="text"
                  id="entry-value"
                  placeholder="0,00"
                  inputmode="decimal"
                  required
                  class="focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label
                  for="quantity"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Quantidade de Ações:</label
                >
                <input
                  type="number"
                  id="quantity"
                  placeholder="0"
                  min="1"
                  required
                  class="focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label
                  for="brokerage-fees"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Corretagem (R$):</label
                >
                <input
                  type="text"
                  id="brokerage-fees"
                  inputmode="decimal"
                  placeholder="0,00"
                  class="focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div class="md:col-span-3">
                <label
                  for="observations"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Observações</label
                >
                <textarea
                  id="observations"
                  rows="3"
                  class="focus:ring-blue-500 focus:border-blue-500 trade-diary"
                  placeholder="Anote seu diário de trade: racional, pontos de entrada/saída, gestão, emoções, etc."
                ></textarea>
              </div>
              <div class="md:col-span-3 flex justify-end">
                <button
                  type="submit"
                  class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg"
                >
                  Registrar Operação (Swing)
                </button>
              </div>
            </form>
          </div>

          <!-- Operations List -->
          <div class="card">
            <div
              class="mb-4 flex items-center justify-between gap-3"
              style="flex-wrap: nowrap; overflow-x: auto"
            >
              <h2 class="text-2xl font-semibold text-gray-800">Lançamentos</h2>

              <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                  <label for="swing-period" class="text-sm text-gray-600"
                    >Período:</label
                  >
                  <select
                    id="swing-period"
                    class="type-select"
                    style="max-width: 250px"
                  >
                    <option value="todos">Todos</option>
                    <option value="dia">Hoje</option>
                    <option value="semana">Semana</option>
                    <option value="mes">Mês</option>
                    <option value="personalizado">Personalizado</option>
                  </select>
                </div>

                <div class="flex items-center gap-2">
                  <label for="swing-filter-asset" class="text-sm text-gray-600"
                    >Ativo:</label
                  >
                  <select
                    id="swing-filter-asset"
                    class="type-select"
                    style="max-width: 160px"
                  >
                    <option value="">Todos</option>
                    <option value="WIN">WIN</option>
                    <option value="WDO">WDO</option>
                    <option value="BIT">BIT</option>
                    <option value="IND">IND</option>
                    <option value="DOL">DOL</option>
                    <option value="PETR4">PETR4</option>
                    <option value="VALE3">VALE3</option>
                    <option value="BBAS3">BBAS3</option>
                    <option value="ITUB4">ITUB4</option>
                    <option value="WEGE3">WEGE3</option>
                  </select>
                  <button
                    id="swing-order-toggle"
                    type="button"
                    title="Ordenação"
                    aria-label="Ordenação"
                    data-order="desc"
                    class="p-2 rounded border border-gray-300 hover:bg-gray-50"
                  >
                    <svg
                      class="h-5 w-5 text-gray-600"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M8 4l-4 4h3v10h2V8h3L8 4z"
                      ></path>
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M16 20l4-4h-3V6h-2v10h-3l4 4z"
                      ></path>
                    </svg>
                  </button>
                </div>

                <div class="flex items-center gap-4 text-sm text-gray-700">
                  <span>Total Op.: <b id="swing-total-ops">0</b></span>
                  <span>Total Taxas: <b id="swing-total-fees">R$ 0,00</b></span>
                  <span
                    >Resultado Líquido:
                    <b id="swing-total-result">R$ 0,00</b></span
                  >
                </div>
              </div>
            </div>
            <div class="overflow-x-auto">
              <table
                class="min-w-full bg-white rounded-lg overflow-hidden table-responsive"
              >
                <thead class="bg-gray-50">
                  <tr>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Data
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Ativo
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Tipo
                    </th>
                    <th
                      class="py-3 px-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Qtd.
                    </th>
                    <th
                      class="py-3 px-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Entrada
                    </th>
                    <th
                      class="py-3 px-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Corretagem
                    </th>
                    <th
                      class="py-3 px-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Total Op.
                    </th>
                    <th
                      class="py-3 px-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Resultado
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Ações
                    </th>
                  </tr>
                </thead>
                <tbody id="operations-list" class="divide-y divide-gray-200">
                  <tr>
                    <td colspan="9" class="py-4 px-4 text-center text-gray-500">
                      Nenhuma operação registrada ainda.
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Day Trade Tab Content -->
        <div id="daytrade" class="tab-content">
          <div class="card">
            <h2 class="text-2xl font-semibold mb-6 text-gray-800">Day Trade</h2>
            <form
              id="daytrade-form"
              class="grid grid-cols-1 md:grid-cols-3 gap-6"
            >
              <!-- LINHA 1: Data, % por Trade, Símbolo -->
              <div>
                <label
                  for="dt-date"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Data da Operação</label
                >
                <input
                  type="date"
                  id="dt-date"
                  required
                  class="focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label
                  for="dt-allowed-trade"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Permitido por Trade (R$)</label
                >
                <input
                  type="text"
                  id="dt-allowed-trade"
                  placeholder="R$ 0,00"
                  class="focus:ring-blue-500 focus:border-blue-500 money-display"
                  readonly
                />
              </div>
              <div>
                <label
                  for="dt-asset-symbol"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Símbolo do Ativo (Ex: PETR4)</label
                >
                <input
                  type="text"
                  id="dt-asset-symbol"
                  list="symbols-dt-datalist"
                  placeholder="Ex: WIN, WDO, BIT, IND, DOL, PETR4"
                  required
                  class="focus:ring-blue-500 focus:border-blue-500"
                />
              </div>

              <!-- LINHA 2: Resultado Bruto, Quantidade de CONTRATOS, Permitido por Trade -->
              <div>
                <label
                  for="dt-gross-result"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Resultado Bruto (R$)</label
                >
                <input
                  type="number"
                  id="dt-gross-result"
                  step="0.01"
                  placeholder="0,00"
                  class="focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label
                  for="dt-quantity"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Qtd. de Contratos (Ações)</label
                >
                <input
                  type="number"
                  id="dt-quantity"
                  min="1"
                  placeholder="0"
                  class="focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label
                  for="dt-operation-fees"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Corretagem (R$)</label
                >
                <input
                  type="number"
                  id="dt-operation-fees"
                  step="0.01"
                  placeholder="0,00"
                  class="focus:ring-blue-500 focus:border-blue-500"
                />
              </div>

              <!-- LINHA 3: Diário de Trade + Print -->
              <div class="md:col-span-2">
                <label
                  for="dt-observations"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Diário de Trade</label
                >
                <textarea
                  id="dt-observations"
                  rows="3"
                  class="focus:ring-blue-500 focus:border-blue-500 trade-diary"
                  placeholder="Anote o racional, pontos de entrada/saída, gestão, emoções, etc."
                ></textarea>
              </div>
              <div>
                <label
                  for="dt-screenshot"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Print da Tela (colar ou selecionar)</label
                >
                <div
                  id="dt-screenshot-paste"
                  class="border border-dashed rounded-md flex items-center justify-center text-sm text-gray-500 mb-2"
                  contenteditable="true"
                >
                  Cole aqui a imagem (Ctrl+V) ou arraste
                </div>
                <input
                  type="file"
                  id="dt-screenshot"
                  accept="image/*"
                  class="focus:ring-blue-500 focus:border-blue-500"
                />
              </div>

              <!-- Campos antigos mantidos como hidden para não quebrar o JS atual; serão removidos ao refatorar -->
              <div class="hidden">
                <input type="time" id="dt-time" />
                <select id="dt-asset-type">
                  <option value="acoes">Ações</option>
                </select>
                <select id="dt-operation-type">
                  <option value="compra">Compra</option>
                </select>
                <input type="number" id="dt-entry-value" />
              </div>

              <div class="md:col-span-3 flex justify-end">
                <button
                  type="submit"
                  class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg"
                >
                  Registrar Operação (Day Trade)
                </button>
              </div>
            </form>
          </div>

          <!-- Day Trade Launches List (layout inicial; lógica será ligada depois) -->
          <div class="card">
            <div
              class="mb-4 flex items-center justify-between gap-3"
              style="flex-wrap: nowrap; overflow-x: auto"
            >
              <h2 class="text-2xl font-semibold text-gray-800">Lançamentos</h2>

              <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                  <label for="daytrade-period" class="text-sm text-gray-600"
                    >Período:</label
                  >
                  <select
                    id="daytrade-period"
                    class="type-select"
                    style="max-width: 250px"
                  >
                    <option value="todos">Todos</option>
                    <option value="dia">Hoje</option>
                    <option value="semana">Semana</option>
                    <option value="mes">Mês</option>
                    <option value="personalizado">Personalizado</option>
                  </select>
                </div>

                <div class="flex items-center gap-2">
                  <label
                    for="daytrade-filter-asset"
                    class="text-sm text-gray-600"
                    >Ativo:</label
                  >
                  <select
                    id="daytrade-filter-asset"
                    class="type-select"
                    style="max-width: 160px"
                  >
                    <option value="">Todos</option>
                    <option value="WIN">WIN</option>
                    <option value="WDO">WDO</option>
                    <option value="BIT">BIT</option>
                    <option value="IND">IND</option>
                    <option value="DOL">DOL</option>
                    <option value="PETR4">PETR4</option>
                    <option value="VALE3">VALE3</option>
                    <option value="BBAS3">BBAS3</option>
                    <option value="ITUB4">ITUB4</option>
                    <option value="WEGE3">WEGE3</option>
                  </select>
                  <button
                    id="daytrade-order-toggle"
                    type="button"
                    title="Ordenação"
                    aria-label="Ordenação"
                    data-order="desc"
                    class="p-2 rounded border border-gray-300 hover:bg-gray-50"
                  >
                    <svg
                      class="h-5 w-5 text-gray-600"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M8 4l-4 4h3v10h2V8h3L8 4z"
                      ></path>
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M16 20l4-4h-3V6h-2v10h-3l4 4z"
                      ></path>
                    </svg>
                  </button>
                </div>

                <div class="flex items-center gap-4 text-sm text-gray-700">
                  <span>Total Op.: <b id="dt-total-ops">0</b></span>
                  <span>Total Contratos: <b id="dt-total-contracts">0</b></span>
                  <span>Total Taxas: <b id="dt-total-fees">R$ 0,00</b></span>
                  <span
                    >Resultado Líquido:
                    <b id="dt-total-result">R$ 0,00</b></span
                  >
                </div>
              </div>
            </div>
            <div class="overflow-x-auto">
              <table
                class="min-w-full bg-white rounded-lg overflow-hidden table-responsive"
              >
                <thead class="bg-gray-50">
                  <tr>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Data
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Ativo
                    </th>
                    <th
                      class="py-3 px-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Resultado Bruto
                    </th>
                    <th
                      class="py-3 px-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Qtd. de Contratos
                    </th>
                    <th
                      class="py-3 px-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Taxas
                    </th>
                    <th
                      class="py-3 px-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Corretagem
                    </th>
                    <th
                      class="py-3 px-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Resultado Líquido
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Ações
                    </th>
                  </tr>
                </thead>
                <tbody id="daytrade-list" class="divide-y divide-gray-200">
                  <tr>
                    <td colspan="8" class="py-4 px-4 text-center text-gray-500">
                      Nenhum lançamento ainda.
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Capital Management Tab Content -->
        <div id="capital" class="tab-content">
          <div class="card">
            <h2 class="text-2xl font-semibold mb-6 text-gray-800">
              Lançamentos
            </h2>

            <!-- Unified Capital Form -->
            <form
              id="capital-unified-form"
              class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-2"
            >
              <div>
                <label
                  for="cap-date"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Data</label
                >
                <input
                  type="date"
                  id="cap-date"
                  required
                  class="w-full focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label
                  for="cap-type"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Tipo</label
                >
                <select id="cap-type" class="type-select">
                  <option value="deposito">Depósito</option>
                  <option value="saque">Saque</option>
                  <option value="taxa">Taxas diversas</option>
                  <option value="outros">Outros</option>
                </select>
              </div>
              <div>
                <label
                  for="cap-value"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Valor (R$)</label
                >
                <input
                  type="number"
                  id="cap-value"
                  step="0.01"
                  min="0.01"
                  placeholder="0,00"
                  required
                  class="w-full focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label
                  for="cap-desc"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Descrição (opcional)</label
                >
                <input
                  type="text"
                  id="cap-desc"
                  placeholder="Ex: Ajuste, Pix, Tarifa bancária"
                  class="w-full focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div class="md:col-span-4 flex justify-end">
                <button
                  type="submit"
                  class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-lg"
                >
                  Registrar
                </button>
              </div>
            </form>
          </div>
          <!-- Transactions Log -->
          <div class="card mt-6">
            <div
              class="mb-4 flex items-center justify-between gap-3"
              style="flex-wrap: nowrap; overflow-x: auto"
            >
              <h3 class="text-xl font-semibold text-gray-800">Extrato</h3>

              <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                  <label
                    for="capital-period"
                    class="text-sm text-gray-600 self-center"
                    >Período:</label
                  >
                  <select
                    id="capital-period"
                    class="type-select"
                    style="max-width: 250px"
                  >
                    <option value="todos">Todos</option>
                    <option value="dia">Hoje</option>
                    <option value="semana">Semana</option>
                    <option value="mes">Mês</option>
                    <option value="personalizado">Personalizado</option>
                  </select>
                </div>

                <div class="flex items-center gap-2">
                  <button
                    id="capital-order-toggle"
                    type="button"
                    title="Ordenação"
                    aria-label="Ordenação"
                    data-order="desc"
                    class="p-2 rounded border border-gray-300 hover:bg-gray-50"
                  >
                    <svg
                      class="h-5 w-5 text-gray-600"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M8 4l-4 4h3v10h2V8h3L8 4z"
                      ></path>
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M16 20l4-4h-3V6h-2v10h-3l4 4z"
                      ></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>

            <div class="overflow-x-auto">
              <table class="min-w-full bg-white rounded-lg overflow-hidden">
                <thead class="bg-gray-50">
                  <tr>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Data
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Tipo
                    </th>
                    <th
                      class="py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Descrição
                    </th>
                    <th
                      class="py-3 px-4 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Valor
                    </th>
                  </tr>
                </thead>
                <tbody id="capital-list" class="divide-y divide-gray-200">
                  <tr>
                    <td colspan="4" class="py-4 px-4 text-center text-gray-500">
                      Nenhum lançamento ainda.
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Analysis and Reports Tab Content -->
        <div id="analysis" class="tab-content">
          <div class="card-chart">
            <div
              class="mb-6 flex items-center justify-between gap-3"
              style="flex-wrap: nowrap; overflow-x: auto"
            >
              <h2 class="text-2xl font-semibold text-gray-800">
                Análise e Relatórios
              </h2>

              <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                  <label for="filter-start-date" class="text-sm text-gray-600"
                    >Data Inicial:</label
                  >
                  <input
                    type="date"
                    id="filter-start-date"
                    class="focus:ring-blue-500 focus:border-blue-500 rounded-md border-gray-300 shadow-sm"
                    style="max-width: 140px"
                  />
                </div>

                <div class="flex items-center gap-2">
                  <label for="filter-end-date" class="text-sm text-gray-600"
                    >Data Final:</label
                  >
                  <input
                    type="date"
                    id="filter-end-date"
                    class="focus:ring-blue-500 focus:border-blue-500 rounded-md border-gray-300 shadow-sm"
                    style="max-width: 140px"
                  />
                </div>

                <div class="flex items-center gap-2">
                  <label for="filter-asset" class="text-sm text-gray-600"
                    >Ativo:</label
                  >
                  <input
                    type="text"
                    id="filter-asset"
                    placeholder="Ex: PETR4"
                    class="focus:ring-blue-500 focus:border-blue-500 rounded-md border-gray-300 shadow-sm"
                    style="max-width: 100px"
                  />
                </div>

                <div class="flex items-center gap-4 text-sm text-gray-700">
                  <label class="flex items-center gap-2">
                    <input
                      id="filter-include-swing"
                      type="checkbox"
                      class="form-checkbox"
                      checked
                    />
                    <span>Swing Trade</span>
                  </label>
                  <label class="flex items-center gap-2">
                    <input
                      id="filter-include-day"
                      type="checkbox"
                      class="form-checkbox"
                      checked
                    />
                    <span>Day Trade</span>
                  </label>
                  <button
                    onclick="applyFilters()"
                    class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg"
                  >
                    Aplicar Filtros
                  </button>
                </div>
              </div>
            </div>

            <!-- Charts layout: 2/3 Performance + 1/3 Donut -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <!-- Performance Chart -->
              <div class="chart-card md:col-span-2">
                <h3
                  class="text-lg font-semibold text-gray-700 mb-2 text-center"
                >
                  Análise de Performance
                </h3>
                <canvas id="equityCanvas" class="chart-canvas"></canvas>
              </div>

              <!-- Win Rate Chart -->
              <div class="chart-card md:col-span-1">
                <h3
                  class="text-lg font-semibold text-gray-700 mb-2 text-center"
                >
                  Taxa de Sucesso
                </h3>
                <canvas id="winRateCanvas" class="chart-canvas"></canvas>
              </div>
            </div>
          </div>
        </div>

        <!-- Taxes Tab Content -->
        <div id="taxes" class="tab-content">
          <div class="card">
            <h2 class="text-2xl font-semibold mb-6 text-gray-800">Impostos</h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <!-- Card 1: Impostos Day Trade -->
              <div class="card">
                <h3 class="text-xl font-medium mb-4 text-gray-800">
                  Impostos Day Trade
                </h3>
                <div class="space-y-4">
                  <div>
                    <p class="text-sm text-gray-600">
                      IRRF (R$)
                      <span class="text-xs text-gray-500"
                        >(retido na fonte)</span
                      >
                    </p>
                    <p
                      id="dt-irrf-value"
                      class="text-2xl font-bold text-red-600"
                    >
                      R$ 0,00
                    </p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-600">DARF Estimado (R$)</p>
                    <p
                      id="dt-darf-value"
                      class="text-2xl font-bold text-red-600"
                    >
                      R$ 0,00
                    </p>
                  </div>
                </div>
              </div>

              <!-- Card 2: Impostos Swing Trade -->
              <div class="card">
                <h3 class="text-xl font-medium mb-4 text-gray-800">
                  Impostos Swing Trade
                </h3>
                <div class="space-y-4">
                  <div>
                    <p class="text-sm text-gray-600">
                      IRRF (R$)
                      <span class="text-xs text-gray-500"
                        >(retido na fonte)</span
                      >
                    </p>
                    <p
                      id="sw-irrf-value"
                      class="text-2xl font-bold text-red-600"
                    >
                      R$ 0,00
                    </p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-600">DARF Estimado (R$)</p>
                    <p
                      id="sw-darf-value"
                      class="text-2xl font-bold text-red-600"
                    >
                      R$ 0,00
                    </p>
                  </div>
                </div>
              </div>

              <!-- Card 3: Impostos Totais (mantém IDs para compatibilidade) -->
              <div class="card">
                <h3 class="text-xl font-medium mb-4 text-gray-800">
                  Impostos Totais
                </h3>
                <div class="space-y-4">
                  <div>
                    <p class="text-sm text-gray-600">
                      IRRF Total (R$)
                      <span class="text-xs text-gray-500"
                        >(retido na fonte)</span
                      >
                    </p>
                    <p id="irrf-value" class="text-2xl font-bold text-red-600">
                      R$ 0,00
                    </p>
                  </div>
                  <div>
                    <p class="text-sm text-gray-600">DARF Total (R$)</p>
                    <p id="darf-value" class="text-2xl font-bold text-red-600">
                      R$ 0,00
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Initial Config Tab Content -->
        <div id="config" class="tab-content">
          <div class="card">
            <h2 class="text-2xl font-semibold mb-6 text-gray-800">
              Configurações Iniciais
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h3 class="text-lg font-semibold mb-3 text-gray-800">
                  Taxas por Contrato (Futuros)
                </h3>
                <div class="grid grid-cols-2 gap-3">
                  <label class="text-sm text-gray-600" for="cfg-fee-win"
                    >WIN (R$)</label
                  >
                  <input
                    id="cfg-fee-win"
                    type="number"
                    step="0.01"
                    class="focus:ring-blue-500 focus:border-blue-500"
                  />
                  <label class="text-sm text-gray-600" for="cfg-fee-wdo"
                    >WDO (R$)</label
                  >
                  <input
                    id="cfg-fee-wdo"
                    type="number"
                    step="0.01"
                    class="focus:ring-blue-500 focus:border-blue-500"
                  />
                  <label class="text-sm text-gray-600" for="cfg-fee-ind"
                    >IND (R$)</label
                  >
                  <input
                    id="cfg-fee-ind"
                    type="number"
                    step="0.01"
                    class="focus:ring-blue-500 focus:border-blue-500"
                  />
                  <label class="text-sm text-gray-600" for="cfg-fee-dol"
                    >DOL (R$)</label
                  >
                  <input
                    id="cfg-fee-dol"
                    type="number"
                    step="0.01"
                    class="focus:ring-blue-500 focus:border-blue-500"
                  />
                  <label class="text-sm text-gray-600" for="cfg-fee-bit"
                    >BIT (R$)</label
                  >
                  <input
                    id="cfg-fee-bit"
                    type="number"
                    step="0.01"
                    class="focus:ring-blue-500 focus:border-blue-500"
                  />
                </div>
              </div>
              <div>
                <h3 class="text-lg font-semibold mb-3 text-gray-800">
                  Taxa para Ações
                </h3>
                <div class="grid grid-cols-2 gap-3">
                  <label class="text-sm text-gray-600" for="cfg-fee-stocks"
                    >Percentual (%)</label
                  >
                  <input
                    id="cfg-fee-stocks"
                    type="number"
                    step="0.01"
                    class="focus:ring-blue-500 focus:border-blue-500"
                  />
                </div>
                <div class="grid grid-cols-2 gap-3 mt-6">
                  <label
                    class="text-sm font-semibold text-gray-700"
                    for="cfg-initial-deposit"
                    >Aporte Inicial (R$)</label
                  >
                  <input
                    id="cfg-initial-deposit"
                    type="text"
                    inputmode="decimal"
                    class="focus:ring-blue-500 focus:border-blue-500"
                    placeholder="0,00"
                  />
                </div>
                <div class="grid grid-cols-2 gap-3 mt-6">
                  <label
                    class="text-sm font-semibold text-gray-700"
                    for="cfg-percent-trade"
                    >Percentual de risco por trade com base no capital
                    (%)</label
                  >
                  <input
                    id="cfg-percent-trade"
                    type="number"
                    step="0.50"
                    class="focus:ring-blue-500 focus:border-blue-500"
                    placeholder="0"
                  />
                </div>
              </div>
            </div>
            <div class="mt-6 flex justify-end">
              <button
                id="save-config-btn"
                class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg"
              >
                Salvar Configurações
              </button>
            </div>
          </div>
          <!-- Card: Excluir dados -->
          <div class="card mt-6">
            <h3 class="text-xl font-semibold mb-4 text-gray-800">
              Excluir dados
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
              <div class="md:col-span-2">
                <label
                  for="wipe-scope"
                  class="block text-gray-700 text-sm font-semibold mb-2"
                  >Escolha o que excluir</label
                >
                <select id="wipe-scope" class="type-select">
                  <option value="all">Limpar tudo</option>
                  <option value="swing">Limpar Swing Trade</option>
                  <option value="daytrade">Limpar Day Trade</option>
                  <option value="capital">Limpar Extrato Financeiro</option>
                </select>
              </div>
              <div class="flex md:justify-end">
                <button
                  id="wipe-run-btn"
                  class="bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg"
                >
                  Excluir
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Profile Tab Content -->
        <div id="profile" class="tab-content">
          <div class="card">
            <h2 class="text-2xl font-semibold mb-6 text-gray-800">Perfil</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <!-- Informações Pessoais -->
              <div>
                <h3 class="text-lg font-semibold mb-4 text-gray-800">
                  Informações Pessoais
                </h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >Nome Completo</label
                    >
                    <input
                      type="text"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                      placeholder="Seu nome completo"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >Email</label
                    >
                    <input
                      type="email"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                      placeholder="seu@email.com"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >CPF</label
                    >
                    <input
                      type="text"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                      placeholder="000.000.000-00"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >Telefone</label
                    >
                    <input
                      type="tel"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                      placeholder="(11) 99999-9999"
                    />
                  </div>
                </div>
              </div>

              <!-- Configurações da Conta -->
              <div>
                <h3 class="text-lg font-semibold mb-4 text-gray-800">
                  Configurações da Conta
                </h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >Nome de Usuário</label
                    >
                    <input
                      type="text"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                      placeholder="username"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >Nova Senha</label
                    >
                    <input
                      type="password"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                      placeholder="••••••••"
                    />
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >Confirmar Senha</label
                    >
                    <input
                      type="password"
                      class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
                      placeholder="••••••••"
                    />
                  </div>
                  <div class="flex items-center">
                    <input
                      type="checkbox"
                      id="notifications"
                      class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                    />
                    <label
                      for="notifications"
                      class="ml-2 block text-sm text-gray-700"
                      >Receber notificações por email</label
                    >
                  </div>
                </div>
              </div>
            </div>

            <div class="mt-8 flex justify-end space-x-4">
              <button
                type="button"
                class="px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500"
              >
                Cancelar
              </button>
              <button
                type="button"
                class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
              >
                Salvar Alterações
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <datalist id="symbols-datalist"></datalist>
    <datalist id="symbols-dt-datalist">
      <option value="Todos" />
      <!-- Prioridades para day trade -->
      <option value="WIN" />
      <option value="WDO" />
      <option value="BIT" />
      <option value="IND" />
      <option value="DOL" />
      <!-- Ações comuns (ampliar conforme necessário) -->
      <option value="PETR4" />
      <option value="VALE3" />
      <option value="BBAS3" />
      <option value="ITUB4" />
      <option value="WEGE3" />
    </datalist>

    <!-- Modal de Seleção de Data -->
    <div
      id="date-modal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center"
    >
      <div class="bg-white rounded-lg p-6 w-96 max-w-md mx-4">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800">Seleção de Data</h3>
          <button
            id="close-date-modal"
            class="text-gray-400 hover:text-gray-600"
          >
            <img
              src="src/assets/icons/close.svg"
              class="w-6 h-6"
              alt="Fechar"
            />
          </button>
        </div>

        <div class="space-y-4">
          <div>
            <label
              for="modal-start-date"
              class="block text-sm font-medium text-gray-700 mb-2"
              >Data Inicial</label
            >
            <input
              type="date"
              id="modal-start-date"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>

          <div>
            <label
              for="modal-end-date"
              class="block text-sm font-medium text-gray-700 mb-2"
              >Data Final</label
            >
            <input
              type="date"
              id="modal-end-date"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>

          <div class="flex items-center">
            <input
              type="checkbox"
              id="no-end-date"
              checked
              class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
            />
            <label for="no-end-date" class="ml-2 block text-sm text-gray-700"
              >Sem data final</label
            >
          </div>
        </div>

        <div class="flex justify-end space-x-3 mt-6">
          <button
            id="cancel-date-modal"
            class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500"
          >
            Cancelar
          </button>
          <button
            id="confirm-date-modal"
            class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            OK
          </button>
        </div>
      </div>
    </div>

    <script type="module" src="./src/main.js"></script>
  </body>
</html>
